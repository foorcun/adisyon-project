<div class="odeme-page" >
<!-- <div class="odeme-page" style="background-color: red; width: 100%"> -->
  <!-- Orders exist -->
  <div
    *ngIf="odemePageFacadeService.orders$ | async as orders; else noOrders"
    class="order-group"
  >
    <div *ngFor="let order of orders" class="mb-3">
      <div class="order-items">
        <ul>
          <li
            *ngFor="let item of order.items"
            [class.selected]="isSelected(item)"
            (click)="!isSelected(item) && selectItem(item)"
          >
            <div
              class="item-wrapper d-flex justify-content-between align-items-center"
            >
              <span class="item-content">
                {{ item.product.name }} - {{ item.product.price }}₺ - x{{
                  item.quantity
                }}
              </span>

              <!-- Deselect button (only clickable when visible) -->
              <button
                *ngIf="isSelected(item)"
                class="btn btn-sm btn-outline-light deselect-btn"
                (click)="onDeselectClick($event, item)"
                aria-label="Geri al"
              >
                <i class="fas fa-rotate-left"></i>
              </button>

              <!-- Empty spacer to preserve layout when not selected -->
              <span *ngIf="!isSelected(item)" class="deselect-spacer"></span>
            </div>
          </li>
        </ul>
      </div>
    </div>

    <!-- Total of selected items -->
    <div *ngIf="selectedItems.length > 0" class="mt-4 text-end">
      <h5>
        Seçilen Ürünlerin Toplamı:
        <strong>{{ selectedTotal | number : "1.2-2" }}₺</strong>
      </h5>
    </div>
  </div>

  <!-- No Orders Message -->
  <ng-template #noOrders>
    <p class="no-orders-message">Bu masa için sipariş bulunamadı.</p>
  </ng-template>
</div>
